name: Pull Request

on:
  pull_request:
    types: [opened, synchronize, reopened, edited]

jobs:
  validate:
    name: Validate
    uses: ./.github/workflows/validate.yml
    permissions:
      contents: read
      checks: write

  label:
    name: Label
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    steps:
      - uses: srvaroa/labeler@v1.14.0
        env:
          GITHUB_TOKEN: ${{ github.token }}

  pr-size:
    name: PR Size Check
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: ookami-kb/gh-pr-size-watcher@v1.5.0
        with:
          githubToken: ${{ secrets.GITHUB_TOKEN }}
          errorSize: 750
          errorMessage: ':no_entry: PR has more than **{allowed} additions**. Split it into smaller PRs.'
          warningSize: 333
          warningMessage: ':warning: PR has more than **{allowed} additions**. Consider splitting it into smaller PRs.'
          excludeLabels: |
            allow-large-pr
          excludePaths: |
            *.md
            specs/**
            features/*.feature
            .specify/**
            .claude/**
